<!DOCTYPE html>
<html lang="en-GB">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>How does this website work? | Jake Wright</title>
	
	
	<link rel="webmention" href="https://webmention.io/jakewright.net/webmention" />
	<link rel="pingback" href="https://webmention.io/jakewright.net/xmlrpc" />
	
	
	<link rel="stylesheet" href="https://jakewright.net/sass/main.css">
	
	
</head>
<body>
	<header>
    <h1><a href="https://jakewright.net/">Jake Wright</a></h1>

    <nav>
        <ul>
            <li><a href="https://jakewright.net/about/">About</a></li>
            <li><a href="https://jakewright.net/posts/">Posts</a></li>

        </ul>
    </nav>
</header>

	
<main>
    <article>
        <h1>How does this website work?</h1>
        <b><time>2026-01-04 00:00:00</time></b>
        

        <div>
            
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Hugo static site generator
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>
<code class="verbatim">jakewright.net</code> is built using the static site generator, <a href="https://gohugo.io/">Hugo</a>.
I find Hugo slightly difficult to work with, but it&#39;s fast and it&#39;s written in <a href="https://go.dev">Go</a> which is a language I&#39;m very familiar with. I use a custom theme.</p>
<p>
When I&#39;m making changes or writing a new blog post, I run the Hugo development server locally.</p>
<div class="src src-sh">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>hugo server --buildDrafts --buildFuture --disableFastRender</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-2" class="outline-2">
<h2 id="headline-2">
Git repositories
</h2>
<div id="outline-text-headline-2" class="outline-text-2">
<p>
This website is comprised of two git repositories that both live on GitHub.</p>
<div id="outline-container-headline-3" class="outline-3">
<h3 id="headline-3">
üîê <code class="verbatim">jake-wright-net-src</code> (private)
</h3>
<div id="outline-text-headline-3" class="outline-text-3">
<p>
Contains the source code. It&#39;s private is so I can draft blog posts without them immediately becoming public.</p>
</div>
</div>
<div id="outline-container-headline-4" class="outline-3">
<h3 id="headline-4">
üåê <a href="https://github.com/jakewright/jake-wright-net"><code class="verbatim">jake-wright-net</code></a> (public)
</h3>
<div id="outline-text-headline-4" class="outline-text-3">
<p>
Contains the generated HTML files, i.e. the output of <code class="verbatim">hugo build</code>.
Making this public lets anyone access the full history of changes to the site.
This repo is also used for comments (see below).</p>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-5" class="outline-2">
<h2 id="headline-5">
Build pipeline
</h2>
<div id="outline-text-headline-5" class="outline-text-2">
<p>
Using two Cloudflare Pages projects, I get continuous deployment to private <em>preview</em> environments for each feature branch, and to the <em>production</em> environment for the <code class="verbatim">main</code> branch.</p>
<p>
<figure><img src="/posts/how-does-this-site-work/build-pipeline.svg"
    alt="Website build pipeline" width="100%">
</figure>
</p>
<div id="outline-container-headline-6" class="outline-3">
<h3 id="headline-6">
Preview environment
</h3>
<div id="outline-text-headline-6" class="outline-text-3">
<p>
Once I&#39;m happy with a change or a blog post in the private repo, I can deploy it to a <em>preview</em> environment simply by pushing the branch to GitHub.</p>
<p>
Cloudflare automatically watches the <code class="verbatim">jake-wright-net-src</code> repository and runs <code class="verbatim">hugo build</code> whenever any non-<code class="verbatim">main</code> branch is pushed to.
This is configured by setting the <em>Preview branch</em> to <em>All non-Production branches</em>.</p>
<p>
<figure><img src="/posts/how-does-this-site-work/branch-control.png"
    alt="Website build pipeline" width="300px">
</figure>
</p>
<p>
If I push <code class="verbatim">my-branch</code> to GitHub, the site is automatically built and the preview is made available at <code class="verbatim">my-branch.jake-wright-net-preview.pages.dev</code>.
Cloudflare Access control is enabled so that only I can view the preview.</p>
<p>
<figure><img src="/posts/how-does-this-site-work/preview-site.png"
    alt="Preview version of the website only accessible to me" width="100%">
</figure>
</p>
</div>
</div>
<div id="outline-container-headline-7" class="outline-3">
<h3 id="headline-7">
Production deployments
</h3>
<div id="outline-text-headline-7" class="outline-text-3">
<p>
To deploy to production, I simply merge the branch to <code class="verbatim">main</code>. (If I want to skip the preview environment altogether, I can just push to <code class="verbatim">main</code> directly.)</p>
<p>
A GitHub Action runs the <code class="verbatim">hugo</code> build command and commits the output to the public <code class="verbatim">jake-wright-net</code> repository.
The commit message from the private repo is used.
If there are no changes, no commit is made.</p>
<div class="src src-yaml">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">name</span>: <span style="color:#ae81ff">Deploy</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">on</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">push</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">branches</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">jobs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">deploy</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">runs-on</span>: <span style="color:#ae81ff">ubuntu-latest</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">steps</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Checkout source</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/checkout@v6</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">with</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">path</span>: <span style="color:#ae81ff">src</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Checkout destination</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/checkout@v6</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">with</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">repository</span>: <span style="color:#ae81ff">jakewright/jake-wright-net</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">token</span>: <span style="color:#ae81ff">${{ secrets.GH_PAT }}</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">path</span>: <span style="color:#ae81ff">dst</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Setup Hugo</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">peaceiris/actions-hugo@v3</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">with</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">hugo-version</span>: <span style="color:#e6db74">&#39;latest&#39;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">extended</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Build</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">run</span>: <span style="color:#ae81ff">hugo -s src -d ../dst</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Push changes</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">run</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          cd dst
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          git config user.name &#34;Jake Wright&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          git config user.email &#34;5333300+jakewright@users.noreply.github.com&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          if [[ -n $(git status -s) ]]; then
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            COMMIT_MESSAGE=$(git -C ../src log -1 --pretty=%s)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            git add .
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            git commit -m &#34;$COMMIT_MESSAGE&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            git push
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          else
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            echo &#34;No changes to commit&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          fi</span></span></span></code></pre></div>
</div>
<p>
Note that a <a href="https://github.com/actions/checkout/blob/8e8c483db84b4bee98b60c0593521ed34d9990e8/README.md?plain=1#L274-L290">personal access token must be provided</a> so that the GitHub Action can push to the other repository.</p>
<p>
Once the public repo is pushed to, the second Cloudflare Pages project deploys the site.
No build is necessary this time as the GitHub Action has already built the site.</p>
<p>
At this point, the changes will be live at <a href="https://jakewright.net">jakewright.net</a>.</p>
<div id="outline-container-headline-8" class="outline-4">
<h4 id="headline-8">
Why not GitHub Pages?
</h4>
<div id="outline-text-headline-8" class="outline-text-4">
<p>
For the production deployment, I could just use GitHub pages rather than the second Cloudflare Pages project.
However, Cloudflare Pages provides some basic web analytics which GitHub Pages does not.
Beyond that, there are no obvious advantages to either provider.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-9" class="outline-2">
<h2 id="headline-9">
Comments
</h2>
<div id="outline-text-headline-9" class="outline-text-2">
<p>
Comments are powered by <a href="https://giscus.app">giscus</a>, which uses GitHub Discussions to let people leave comments.
For each blog post, a new <em>discussion</em> is created. People can add a comment to the discussion, and it will be associated with the corresponding blog post.
giscus uses JavaScript to load the comments and display under the post. Try it out!</p>
</div>
</div>

        </div>
    </article>

    <script src="https://giscus.app/client.js"
            data-repo="jakewright/jake-wright-net"
            data-repo-id="R_kgDOQwj7uA"
            data-category="Comments"
            data-category-id="DIC_kwDOQwj7uM4C0W7s"
            data-term="/posts/2026-01-04-how-does-this-site-work"
            data-strict="1"
            data-reactions-enabled="1"
            data-emit-metadata="0"
            data-input-position="top"
            data-theme="light"
            data-lang="en"
            crossorigin="anonymous"
            async>
    </script>
</main>

	<footer>
    <ul>
        <li><a href="https://youtube.com/jaketvee" rel="me">YouTube</a></li>
        <li><a href="https://bsky.app/profile/jakewright.net" rel="me">Bluesky</a></li>
        <li><a href="https://x.com/jakewrightuk" rel="me">X</a></li>
        <li><a href="https://www.instagram.com/jakewrightuk/" rel="me">Instagram</a></li>
        <li><a href="https://github.com/jakewright" rel="me">GitHub</a></li>
    </ul>
    <p>&copy; 1994‚Äì2026 Jake Wright
</footer>

</body>
</html>
